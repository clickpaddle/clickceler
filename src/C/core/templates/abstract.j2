{% for rule in abstract_rules -%}
    {% for e in rule.events %}
abstract_rule({{ rule.name }}, {{ rule.priority }},
    [ event({{ e.event }}) ],
    [ {% for cond in e.conditions %}{{ cond }}{% if not loop.last %}, {% endif %}{% endfor %} ],
    [ {{ rule.abstract }} ],
    [ {% for action in rule.actions %}{{ action }}{% if not loop.last %}, {% endif %}{% endfor %} ]
).
    {% endfor %}
{% endfor %}

